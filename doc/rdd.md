---
marp: true
theme: default
paginate: true
---

<!-- _class: lead -->
# 📘 RDD: 要件定義書
プロジェクト名: 季節アニメーション背景切り替えサンプルアプリ  
作成日: 2025-01-27  
作成者: 開発チーム

---

# 🎯 プロジェクト概要
## コンテキスト（AI用）
- 目的: lottie-react を使用した季節（春・夏・秋・冬）のアニメーション背景を切り替えるシンプルなサンプルアプリを実装する
- 背景: lottie-react の基本的な使い方と、状態管理による背景切り替えの実装パターンを学習・検証するため
- 想定ユーザー像: 開発者（学習・検証目的）

## 人間レビュー用
- なぜこのプロジェクトを作るのか  
  lottie-react を使ったアニメーション実装のサンプルとして、季節ごとの背景を切り替える機能を実装する
- どんなユーザーのどんな課題を解決するのか  
  開発者が lottie-react の基本的な使い方を理解し、状態管理による動的なアニメーション切り替えを実装できるようになる
- **一言まとめ:** ボタンクリックで季節のアニメーション背景が切り替わるシンプルなデモアプリ

---

# 🧑‍💻 ユースケース
## コンテキスト（AI用）
- シナリオ1: ユーザーが「春」ボタンをクリック → 春のアニメーション背景に切り替わる
- シナリオ2: ユーザーが「夏」ボタンをクリック → 夏のアニメーション背景に切り替わる
- シナリオ3: ユーザーが「秋」ボタンをクリック → 秋のアニメーション背景に切り替わる
- シナリオ4: ユーザーが「冬」ボタンをクリック → 冬のアニメーション背景に切り替わる
- MVP範囲: **4つの季節ボタンと、選択された季節のアニメーション背景を表示する機能**

## 人間レビュー用
- 利用シーンをストーリーボード的に説明  
  1. アプリを開く → 初期状態（デフォルトは「春」）のアニメーション背景が表示される
  2. 画面上部に「春」「夏」「秋」「冬」の4つのボタンが配置されている
  3. ユーザーが任意の季節ボタンをクリック
  4. 選択された季節のアニメーション背景に即座に切り替わる
  5. アニメーションはループ再生される
- 最小実装範囲を太字で強調  
  **ボタンクリックによる背景切り替え機能のみ（アニメーションのカスタマイズや追加機能は含まない）**

---

# 🏗️ 機能要件
## コンテキスト（AI用）
- 機能一覧（優先度順）
  1. **必須**: 4つの季節ボタン（春・夏・秋・冬）の表示
  2. **必須**: ボタンクリックによる季節状態の管理（React state）
  3. **必須**: 選択された季節に対応する Lottie アニメーション背景を画面いっぱいに表示
  4. **必須**: アニメーションのループ再生
  5. **任意**: ボタンのアクティブ状態の視覚的フィードバック（選択中の季節をハイライト）
- DoD（完了条件）
  - 4つの季節ボタンが表示される
  - 各ボタンをクリックすると、対応する季節のアニメーション背景が画面いっぱいに切り替わる
  - アニメーションが正常に再生される（ループ）
  - Lottie背景が画面全体（width: 100%, height: 100%）を覆うように表示される
  - エラーなく動作する（コンソールエラーなし）
  - エラーハンドリング: アニメーションファイルの読み込み失敗時は、コンソールにエラーを出力し、代替表示（テキストメッセージまたはフォールバック背景）を表示する

## 人間レビュー用
- 機能ごとの簡易図や例を載せる（任意）
  ```
  [春] [夏] [秋] [冬]  ← ボタン群
  ┌─────────────────┐
  │                 │
  │  Lottie背景      │  ← 選択された季節のアニメーション
  │  アニメーション  │     （画面いっぱいに表示）
  │                 │
  └─────────────────┘
  ```

---

# 🛡️ 非機能要件
## コンテキスト（AI用）
- パフォーマンス: アニメーション切り替え時のレスポンス時間 < 100ms（即座に切り替わる）
- セキュリティ: サンプルアプリのため、特にセキュリティ要件なし（外部API不使用）
- 可用性: ローカル開発環境での動作確認ができれば十分
- 運用要件: サンプルアプリのため、運用要件なし
- エラーハンドリング: アニメーションファイルの読み込み失敗時は、エラーメッセージをコンソールに出力し、ユーザーには簡易的なエラー表示（テキストメッセージ）を表示する。ブラウザ非対応時は、lottie-react のフォールバック機能に依存する

## 人間レビュー用
- 具体的な数字やSLOを議論できる形で記載
  - ボタンクリックから背景切り替えまで: 100ms以内
  - アニメーションのフレームレート: 60fps（可能な範囲で）
  - 対応ブラウザ: モダンブラウザ（Chrome, Firefox, Safari, Edge の最新版）

---

# ⚙️ 技術スタック
## コンテキスト（AI用）
- 言語/ランタイム: TypeScript 5.9.3, Node.js
- フレームワーク: React 19.2.0, Vite 7.2.4
- DB/インフラ: 不要（クライアントサイドのみ）
- テスト戦略: サンプルアプリのため、手動テストで十分（必要に応じて Vitest を検討）
- 観測性: 不要（サンプルアプリのため）

## 人間レビュー用
- 選定理由（他スタックとの比較）
  - **React**: コンポーネントベースの開発、状態管理が容易
  - **Vite**: 高速な開発サーバー、HMR対応
  - **lottie-react**: Lottie アニメーションを React で扱うためのデファクトスタンダードライブラリ
  - **TypeScript**: 型安全性による開発効率向上
- 将来スケールの見通し
  サンプルアプリのため、スケールは考慮不要。必要に応じて状態管理ライブラリ（Zustand, Jotai等）の導入を検討可能

---

# 🚫 非目標
## コンテキスト（AI用）
- 今回スコープ外のもの
  - アニメーションのカスタマイズ機能（速度、サイズ、色の変更等）
  - 複数のアニメーションの同時再生
  - アニメーションファイルの動的読み込み（初期ロードで全ファイル読み込み可）
  - レスポンシブデザインの詳細な調整（基本的な表示は考慮）
  - アニメーションの一時停止・再生制御
  - ユーザー設定の永続化（ローカルストレージ等）

## 人間レビュー用
- 今回やらない理由（優先度/コスト/複雑性）
  - サンプルアプリとして最小限の機能に絞る（優先度: 低）
  - 複雑な機能は学習目的から外れる（複雑性: 高）
  - 必要に応じて将来的に拡張可能

---

# 📐 制約
## コンテキスト（AI用）
- 組織/予算/スケジュール: サンプルアプリのため、特に制約なし
- 外部依存（API, 既存システム）
  - lottie-react ライブラリ（npm経由）
  - Lottie アニメーションファイル（JSON形式）
    - 配置場所: `public/lottie/` ディレクトリ
    - 命名規則: `spring.json`, `summer.json`, `autumn.json`, `winter.json`
    - 取得方法: LottieFiles 等の無料リソースから取得（商用利用可能なライセンスのものを選択）
- ライセンス/コンプラ
  - lottie-react: MIT ライセンス（問題なし）
  - 使用する Lottie アニメーションファイルのライセンスに注意（商用利用可能なものを選択）

## 人間レビュー用
- リスクや前提条件を図解
  - **前提条件**: Lottie アニメーションファイル（.json）が4つ（春・夏・秋・冬）必要
    - 配置場所: `public/lottie/spring.json`, `public/lottie/summer.json`, `public/lottie/autumn.json`, `public/lottie/winter.json`
  - **リスク**: アニメーションファイルのサイズが大きい場合、初期ロードが遅くなる可能性
  - **対応**: 必要に応じてアニメーションファイルの最適化を検討

---

# 🎨 デザイン方針（任意）
## コンテキスト（AI用）
- `doc/design/design_context.json` / `doc/html/` の利用可否: なし
- デザイン指針の有無: シンプルで分かりやすいUI（ボタンは見やすく、Lottie背景は画面いっぱいに表示）

## 人間レビュー用
- 画面の雰囲気、トーン＆マナー
  - シンプルで直感的なUI
  - **ボタンは画面上部に横並びで配置**（「春」「夏」「秋」「冬」の順）
  - ボタンは明確に識別できるデザイン
  - **Lottieアニメーション背景は画面いっぱい（width: 100%, height: 100%）に表示**
  - 選択中の季節ボタンは視覚的に区別できる（ハイライト等）
- ブランド要件（任意）
  なし（サンプルアプリのため）

---

# 📑 参照
## コンテキスト（AI用）
- `doc/architecture.md`: なし（必要に応じて作成）
- `doc/design/`: なし
- 外部仕様書
  - lottie-react 公式ドキュメント: https://github.com/LottieFiles/lottie-react
  - Lottie 公式サイト: https://lottiefiles.com/
- APIリンク
  - lottie-react npm: https://www.npmjs.com/package/lottie-react

## 人間レビュー用
- 図解やリファレンスリンク
  - lottie-react の基本的な使い方: 公式ドキュメントを参照
  - Lottie アニメーションファイルの取得: LottieFiles 等の無料リソースを利用
